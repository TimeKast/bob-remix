# 4.0 üîç Auditor√≠a Total del Proyecto

> **Input**: Proyecto completado (todos los issues en DONE)
> **Output**: Reporte de auditor√≠a + issues correctivos si aplica
> **Siguiente**: `5.0_Design_System.md`

**Agentes sugeridos**:

- `/.agent/agents/auditor.md`
- `/.agent/agents/security-auditor.md`
- `/.agent/agents/qa-automation-engineer.md`
- `/.agent/agents/tech-lead.md`

**Cu√°ndo ejecutar**: Al completar TODOS los issues del backlog.

---

## üìå Instrucciones para el AI

1. Verifica que todos los issues en `GITHUB_BACKLOG.md` est√©n en `DONE`
2. Ejecuta cada secci√≥n de auditor√≠a abajo
3. Documenta hallazgos con evidencia
4. Crea issues correctivos si es necesario
5. Emite decisi√≥n final: ‚úÖ Listo / üî¥ Requiere correcciones

---

## üìã Secciones de Auditor√≠a

### 1. Coherencia Docs ‚Üî C√≥digo

**Objetivo**: Todo lo documentado existe en c√≥digo y viceversa.

| Verificaci√≥n                                                 | Status | Evidencia |
| ------------------------------------------------------------ | ------ | --------- |
| Cada user story en `02_user_stories.md` tiene implementaci√≥n | ‚¨ú     |           |
| Cada flujo en `03_functional_flows.md` es funcional          | ‚¨ú     |           |
| Cada entidad en `11_data_model.md` existe en schema          | ‚¨ú     |           |
| Cada permiso en `05_rbac_matrix.md` est√° implementado        | ‚¨ú     |           |
| No hay features en c√≥digo que no est√©n documentadas          | ‚¨ú     |           |
| Glosario en `00_overview.md` consistente con c√≥digo          | ‚¨ú     |           |

**Hallazgos**:

- [ ] Sin hallazgos
- [ ] Hallazgo 1: [descripci√≥n + severidad + evidencia]

---

### 2. Backlog Completado

**Objetivo**: Todos los issues cerrados correctamente.

| Verificaci√≥n                                 | Status | Evidencia |
| -------------------------------------------- | ------ | --------- |
| Todos los issues en `DONE`                   | ‚¨ú     |           |
| No hay issues `BLOCKED` sin resolver         | ‚¨ú     |           |
| Cada issue tiene `Closed note` con evidencia | ‚¨ú     |           |
| GitHub Issues sincronizados con backlog      | ‚¨ú     |           |
| PRs linkeados correctamente                  | ‚¨ú     |           |

**Hallazgos**:

- [ ] Sin hallazgos
- [ ] Hallazgo: [descripci√≥n]

---

### 3. Calidad T√©cnica

**Objetivo**: El c√≥digo cumple est√°ndares de calidad.

```bash
# Ejecutar estos comandos y reportar resultados
npm run build        # Debe pasar sin errores
npm run typecheck    # Debe pasar sin errores
npm run lint         # Sin errores cr√≠ticos
npm run test         # Tests pasando (si existen)
```

| Verificaci√≥n        | Status | Output |
| ------------------- | ------ | ------ |
| `npm run build`     | ‚¨ú     |        |
| `npm run typecheck` | ‚¨ú     |        |
| `npm run lint`      | ‚¨ú     |        |
| `npm run test`      | ‚¨ú     |        |

**Hallazgos**:

- [ ] Sin hallazgos
- [ ] Hallazgo: [error + archivo + l√≠nea]

---

### 3.5 Reutilizaci√≥n de C√≥digo

**Objetivo**: Verificar que no hay c√≥digo duplicado y que se usan componentes existentes.

| Verificaci√≥n                                               | Status | Evidencia |
| ---------------------------------------------------------- | ------ | --------- |
| No hay componentes duplicados de `/components/ui/`         | ‚¨ú     |           |
| No hay hooks duplicados de `/lib/hooks/`                   | ‚¨ú     |           |
| No hay utilidades duplicadas de `/lib/utils/`              | ‚¨ú     |           |
| Nuevos componentes est√°n en ubicaci√≥n correcta             | ‚¨ú     |           |
| Cat√°logo `/docs/reference/reusable-library.md` actualizado | ‚¨ú     |           |

**Buscar anti-patrones**:

```bash
# Buscar posibles duplicados de componentes existentes
# Comparar con cat√°logo en /docs/reference/reusable-library.md
```

**Hallazgos**:

- [ ] Sin hallazgos
- [ ] Hallazgo: [componente duplicado + ubicaci√≥n + original]

---

### 4. Seguridad

**Objetivo**: No hay vulnerabilidades obvias.

| Verificaci√≥n                                    | Status | Evidencia |
| ----------------------------------------------- | ------ | --------- |
| Auth implementado en todas las rutas protegidas | ‚¨ú     |           |
| RBAC verifica permisos en cada Server Action    | ‚¨ú     |           |
| No hay secrets hardcodeados en c√≥digo           | ‚¨ú     |           |
| `.env` en `.gitignore`                          | ‚¨ú     |           |
| Inputs validados con Zod antes de usar          | ‚¨ú     |           |
| Errores no exponen informaci√≥n sensible         | ‚¨ú     |           |
| SQL injection protegido (Drizzle ORM)           | ‚¨ú     |           |
| XSS protegido (React escapa por default)        | ‚¨ú     |           |

**Hallazgos**:

- [ ] Sin hallazgos
- [ ] Hallazgo: [vulnerabilidad + severidad + ubicaci√≥n]

---

### 5. UX / Mobile

**Objetivo**: La app es usable en todos los dispositivos.

| Verificaci√≥n                          | Status | Evidencia |
| ------------------------------------- | ------ | --------- |
| Responsive en 375px (mobile)          | ‚¨ú     |           |
| Responsive en 768px (tablet)          | ‚¨ú     |           |
| Responsive en 1280px (desktop)        | ‚¨ú     |           |
| No hay scroll horizontal              | ‚¨ú     |           |
| Estados loading presentes             | ‚¨ú     |           |
| Estados empty presentes               | ‚¨ú     |           |
| Estados error presentes               | ‚¨ú     |           |
| Touch targets ‚â• 44px                  | ‚¨ú     |           |
| Fonts ‚â• 16px en inputs (iOS zoom fix) | ‚¨ú     |           |

**Hallazgos**:

- [ ] Sin hallazgos
- [ ] Hallazgo: [problema + p√°gina + viewport]

---

### 6. Performance (Opcional)

| Verificaci√≥n          | Status | Valor |
| --------------------- | ------ | ----- |
| LCP < 2.5s            | ‚¨ú     |       |
| FID < 100ms           | ‚¨ú     |       |
| CLS < 0.1             | ‚¨ú     |       |
| Bundle size razonable | ‚¨ú     |       |

---

### 7. Design System Compliance (si aplica)

**Objetivo**: Verificar que la UI sigue el Design System establecido.

| Verificaci√≥n                                 | Status | Evidencia |
| -------------------------------------------- | ------ | --------- |
| Todos los colores usan tokens (no hardcoded) | ‚¨ú     |           |
| Componentes usan variantes definidas         | ‚¨ú     |           |
| Dark mode funciona correctamente             | ‚¨ú     |           |
| Light mode funciona correctamente            | ‚¨ú     |           |
| Temas predefinidos funcionan                 | ‚¨ú     |           |
| Settings de tema funciona                    | ‚¨ú     |           |
| Persistencia de preferencia funciona         | ‚¨ú     |           |
| Nuevos componentes siguen el cat√°logo        | ‚¨ú     |           |

**Hallazgos**:

- [ ] Sin hallazgos
- [ ] Hallazgo: [componente + problema + ubicaci√≥n]

---

### 8. PWA Compliance (OBLIGATORIO)

**Objetivo**: Verificar que la PWA est√° correctamente implementada.

| Verificaci√≥n                       | Status | Evidencia |
| ---------------------------------- | ------ | --------- |
| Manifest v√°lido y completo         | ‚¨ú     |           |
| Iconos 192x192 y 512x512 presentes | ‚¨ú     |           |
| Service Worker registrado          | ‚¨ú     |           |
| Offline fallback funciona          | ‚¨ú     |           |
| Instalable en Chrome Android       | ‚¨ú     |           |
| Instalable en Chrome Desktop       | ‚¨ú     |           |
| iOS "Add to Home Screen" funciona  | ‚¨ú     |           |
| Update flow funciona               | ‚¨ú     |           |
| Lighthouse PWA score ‚â• 90          | ‚¨ú     |           |
| theme_color sincronizado con tema  | ‚¨ú     |           |

**Hallazgos**:

- [ ] Sin hallazgos
- [ ] Hallazgo: [problema + dispositivo + evidencia]

---

## üìä Resumen de Auditor√≠a

```
Auditor√≠a Total - [Nombre del Proyecto]
Fecha: [YYYY-MM-DD]
Auditor: AI Agent

Secciones Auditadas:
1. Coherencia Docs ‚Üî C√≥digo: ‚úÖ / ‚ö†Ô∏è / üî¥
2. Backlog Completado:       ‚úÖ / ‚ö†Ô∏è / üî¥
3. Calidad T√©cnica:          ‚úÖ / ‚ö†Ô∏è / üî¥
4. Seguridad:                ‚úÖ / ‚ö†Ô∏è / üî¥
5. UX / Mobile:              ‚úÖ / ‚ö†Ô∏è / üî¥
6. Performance:              ‚úÖ / ‚ö†Ô∏è / üî¥ / N/A
7. Design System:            ‚úÖ / ‚ö†Ô∏è / üî¥ / N/A
8. PWA:                      ‚úÖ / ‚ö†Ô∏è / üî¥

Total Hallazgos: X
- Cr√≠ticos: X
- Importantes: X
- Mejoras: X
```

---

## üö® Hallazgos Consolidados

| #   | Secci√≥n   | Severidad     | Descripci√≥n   | Acci√≥n                |
| --- | --------- | ------------- | ------------- | --------------------- |
| 1   | [Secci√≥n] | üî¥ Cr√≠tico    | [Descripci√≥n] | [Issue a crear o fix] |
| 2   | [Secci√≥n] | üü° Importante | [Descripci√≥n] | [Issue a crear o fix] |
| 3   | [Secci√≥n] | üü¢ Mejora     | [Descripci√≥n] | [Opcional]            |

---

## ‚úÖ Decisi√≥n Final

### Si hay hallazgos cr√≠ticos:

```
üî¥ PROYECTO REQUIERE CORRECCIONES

Issues correctivos a crear:
- [APP-XXX] Fix: [descripci√≥n]
- [APP-XXX] Fix: [descripci√≥n]

Siguiente paso: Ejecutar issues correctivos con /plan/3.0_Ejecucion_Local.md
Luego: Re-ejecutar /plan/4.0_Auditoria.md
```

### Si no hay hallazgos cr√≠ticos:

```
‚úÖ PROYECTO LISTO PARA ENTREGA

Checklist final:
- [ ] Documentaci√≥n actualizada
- [ ] README.md con instrucciones de setup
- [ ] Variables de entorno documentadas
- [ ] Deploy a producci√≥n (si aplica)
- [ ] Handoff al cliente/equipo
```

---

## üìÅ Evidencia de Auditor√≠a

Guardar este reporte completado en:

```
/docs/99_auditoria_final.md
```

Con fecha y resultados para referencia futura.

---

## üîÅ Handoff (final)

Cuando la auditor√≠a est√© completa:

1. **Entregar el reporte al usuario.**
2. **Esperar confirmaci√≥n expl√≠cita** del usuario.
3. Si hay hallazgos cr√≠ticos ‚Üí volver a `3.0_Ejecucion_Local.md` para fixes.
4. Si est√° limpio ‚Üí el proyecto est√° listo para entrega final.

> ‚ö†Ô∏è **NO declarar el proyecto como "terminado" sin aprobaci√≥n del usuario.**

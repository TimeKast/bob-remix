---
description: EstÃ¡ndares TypeScript strict mode
globs: ["**/*.ts", "**/*.tsx"]
---

# ğŸ“˜ Reglas TypeScript

Aplican a todos los archivos `.ts` y `.tsx`.

---

## ğŸ”’ Strict Mode Obligatorio

El proyecto usa `strict: true` en tsconfig. Estas reglas son absolutas:

---

## âŒ Prohibiciones Absolutas

### No `any`
```typescript
// âŒ NUNCA
const user: any = await getUser();
const data: any = response.json();

// âœ… SIEMPRE
const user: User = await getUser();
const data: unknown = await response.json();
```

### No `@ts-ignore` ni `@ts-expect-error`
```typescript
// âŒ NUNCA
// @ts-ignore
const value = someFunction();

// âœ… SIEMPRE
// Arreglar el tipo correctamente
const value: ExpectedType = someFunction();
```

---

## âœ… Patrones Obligatorios

### Tipos de retorno explÃ­citos en funciones pÃºblicas
```typescript
// âŒ Evitar inferencia en APIs pÃºblicas
export function getUser(id: string) {
  return db.query.users.findFirst({ where: eq(users.id, id) });
}

// âœ… Tipo explÃ­cito
export function getUser(id: string): Promise<User | undefined> {
  return db.query.users.findFirst({ where: eq(users.id, id) });
}
```

### Discriminated Unions para estados
```typescript
// âœ… PatrÃ³n recomendado
type Result<T> =
  | { success: true; data: T }
  | { success: false; error: string };

type LoadingState<T> =
  | { status: "loading" }
  | { status: "error"; error: string }
  | { status: "success"; data: T };
```

### Uso de `unknown` sobre `any`
```typescript
// âŒ any pierde type safety
function parse(input: any): User { ... }

// âœ… unknown requiere type narrowing
function parse(input: unknown): User {
  if (!isUser(input)) throw new Error("Invalid input");
  return input;
}
```

---

## ğŸ“ Naming Conventions

| Tipo | ConvenciÃ³n | Ejemplo |
|------|------------|---------|
| Types/Interfaces | PascalCase | `UserSession`, `ApiResponse` |
| Variables/Functions | camelCase | `getUserById`, `isActive` |
| Constants | SCREAMING_SNAKE | `MAX_FILE_SIZE`, `API_URL` |
| Generics | Single uppercase | `T`, `K`, `V` |

---

## ğŸ¯ MÃ©tricas de Calidad

| MÃ©trica | Umbral |
|---------|--------|
| TypeScript errors | **0** |
| `any` usages | **0** |
| `@ts-ignore` | **0** |
